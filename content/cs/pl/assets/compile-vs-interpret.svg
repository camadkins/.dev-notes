<svg width="1400" height="800" viewBox="0 0 1400 800" xmlns="http://www.w3.org/2000/svg" font-family="Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif">
  <title>Compilation vs Interpretation — pipelines, optimization, and feedback</title>

  <defs>
    <!-- Shadows & markers -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000" flood-opacity="0.15"></feDropShadow>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="10" markerHeight="10" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"></path>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="10" markerHeight="10" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#0b5ed7"></path>
    </marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="10" markerHeight="10" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2e7d32"></path>
    </marker>

    <!-- Styles -->
    <style>
      .title{font-size:22px;font-weight:700;fill:#111}
      .sub{font-size:14px;fill:#555}
      .box{rx:12;fill:#f8f9fa;stroke:#ced4da}
      .chip{rx:10;fill:#e9ecef;stroke:#bfc6cd}
      .lbl{font-size:16px;fill:#111;font-weight:700}
      .note{font-size:12px;fill:#444}
      .good{fill:#2e7d32}
      .warn{fill:#c1121f}
      .hdr{font-size:18px;font-weight:700;fill:#111}
    </style>
  </defs>

  <!-- Header -->
  <text x="700" y="44" text-anchor="middle" class="title">Compilation vs Interpretation</text>
  <text x="700" y="68" text-anchor="middle" class="sub">Where optimization happens and how fast the feedback loop is</text>

  <!-- =======================
       COMPILATION PIPELINE
       ======================= -->
  <g transform="translate(60,120)" filter="url(#shadow)">
    <text x="0" y="-16" class="hdr">Compilation</text>

    <!-- Boxes -->
    <rect x="0" y="0" width="220" height="80" class="box"></rect>
    <rect x="260" y="0" width="220" height="80" class="box"></rect>
    <rect x="520" y="0" width="220" height="80" class="box"></rect>
    <rect x="780" y="0" width="220" height="80" class="box"></rect>

    <!-- Labels -->
    <text x="110" y="48" text-anchor="middle" class="lbl">Source</text>
    <text x="370" y="48" text-anchor="middle" class="lbl">Compiler</text>
    <text x="630" y="48" text-anchor="middle" class="lbl">Machine Code</text>
    <text x="890" y="48" text-anchor="middle" class="lbl">CPU</text>

    <!-- Arrows -->
    <line x1="220" y1="40" x2="260" y2="40" stroke="#333" stroke-width="2.5" marker-end="url(#arrow)"></line>
    <line x1="480" y1="40" x2="520" y2="40" stroke="#333" stroke-width="2.5" marker-end="url(#arrow)"></line>
    <line x1="740" y1="40" x2="780" y2="40" stroke="#333" stroke-width="2.5" marker-end="url(#arrow)"></line>

    <!-- Gear (optimization) on Compiler -->
    <g transform="translate(458,14)">
      <circle cx="0" cy="0" r="10" fill="#0b5ed7"></circle>
      <g fill="#0b5ed7">
        <rect x="-2" y="-16" width="4" height="8"></rect>
        <rect x="-2" y="8" width="4" height="8"></rect>
        <rect x="-16" y="-2" width="8" height="4"></rect>
        <rect x="8" y="-2" width="8" height="4"></rect>
        <rect x="-12" y="-12" width="6" height="6" transform="rotate(45)"></rect>
      </g>
      <circle cx="0" cy="0" r="4" fill="#fff"></circle>
    </g>

    <!-- Arrow label: Optimization here -->
    <path d="M 465 8 C 520 -20, 560 -20, 600 10" fill="none" stroke="#0b5ed7" stroke-width="2" marker-end="url(#arrow-blue)"></path>
    <text x="540" y="-10" text-anchor="middle" class="note" fill="#0b5ed7">Optimization here</text>

    <!-- Feedback curve (compile cycle) -->
    <path d="M 890 80 C 940 160, 720 220, 110 220 C 60 220, 40 180, 40 140" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrow)"></path>
    <text x="190" y="210" class="note">edit → compile → run (slower loop)</text>

    <!-- Pros / Cons -->
    <g transform="translate(0,260)">
      <rect x="0" y="0" width="1000" height="88" class="chip"></rect>
      <text x="16" y="28" class="note good">✓ Often fastest at runtime; deep, global optimizations; small distribution (binaries)</text>
      <text x="16" y="56" class="note warn">⚠️ Slower iteration; platform-specific binaries; build toolchain overhead</text>
    </g>
  </g>

  <!-- =======================
       INTERPRETATION PIPELINE
       ======================= -->
  <g transform="translate(120,440)" filter="url(#shadow)">
    <text x="-60" y="-16" class="hdr">Interpretation</text>

    <!-- Boxes -->
    <rect x="0" y="0" width="220" height="80" class="box"></rect>
    <rect x="260" y="0" width="220" height="80" class="box"></rect>
    <rect x="520" y="0" width="220" height="80" class="box"></rect>

    <!-- Labels -->
    <text x="110" y="48" text-anchor="middle" class="lbl">Source</text>
    <text x="370" y="48" text-anchor="middle" class="lbl">Interpreter</text>
    <text x="630" y="48" text-anchor="middle" class="lbl">CPU</text>

    <!-- Arrows -->
    <line x1="220" y1="40" x2="260" y2="40" stroke="#333" stroke-width="2.5" marker-end="url(#arrow)"></line>
    <line x1="480" y1="40" x2="520" y2="40" stroke="#333" stroke-width="2.5" marker-end="url(#arrow)"></line>

    <!-- Fast feedback label on interpreter edge -->
    <path d="M 370 -12 C 420 -34, 460 -34, 500 -12" fill="none" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrow-green)"></path>
    <text x="435" y="-22" text-anchor="middle" class="note" fill="#2e7d32">Fast feedback loop</text>

    <!-- Feedback curve (direct edit→run) -->
    <path d="M 630 80 C 700 150, 560 190, 110 190 C 60 190, 20 150, 20 110" fill="none" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrow-green)"></path>
    <text x="190" y="182" class="note" fill="#2e7d32">edit → run (tight loop)</text>

    <!-- Pros / Cons -->
    <g transform="translate(0,240)">
      <rect x="0" y="0" width="900" height="88" class="chip"></rect>
      <text x="16" y="28" class="note good">✓ Rapid iteration; great for scripting, REPLs, teaching, prototyping</text>
      <text x="16" y="56" class="note warn">⚠️ Usually slower per-step; performance depends on VM/JIT; runtime dependency on interpreter</text>
    </g>
  </g>

  <!-- Legend (optional) -->
  <g transform="translate(1060,100)">
    <rect x="0" y="0" width="300" height="120" class="box"></rect>
    <text x="16" y="30" class="note"><tspan fill="#0b5ed7">Blue</tspan>: optimization focus</text>
    <text x="16" y="54" class="note"><tspan fill="#2e7d32">Green</tspan>: fast feedback emphasis</text>
    <text x="16" y="78" class="note">Curved arrows: edit cycle back to Source</text>
  </g>

  <metadata>Intended canvas: 1400×800. Diagram contrasts compilation (optimization at compiler) vs interpretation (fast feedback), with feedback loops.</metadata>
</svg>
